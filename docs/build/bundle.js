var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function r(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function c(t,e,n){t.$$.on_destroy.push(s(e,n))}function a(t){return null==t?"":t}function u(t,e,n=e){return t.set(n),e}function i(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function h(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function m(){return p(" ")}function b(){return p("")}function v(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function y(t){return function(e){return e.preventDefault(),t.call(this,e)}}function $(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function k(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function x(t,e){t.value=null==e?"":e}function D(t,e){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e)return void(l.selected=!0)}}function q(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function _(t,e,n){t.classList[n?"add":"remove"](e)}let S;function C(t){S=t}function N(t){(function(){if(!S)throw new Error("Function called outside component initialization");return S})().$$.on_destroy.push(t)}const T=[],A=[],E=[],O=[],z=Promise.resolve();let B=!1;function P(){B||(B=!0,z.then(F))}function j(t){E.push(t)}let L=!1;const Y=new Set;function F(){if(!L){L=!0;do{for(let t=0;t<T.length;t+=1){const e=T[t];C(e),M(e.$$)}for(C(null),T.length=0;A.length;)A.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];Y.has(e)||(Y.add(e),e())}E.length=0}while(T.length);for(;O.length;)O.pop()();B=!1,L=!1,Y.clear()}}function M(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const I=new Set;let H;function U(){H={r:0,c:[],p:H}}function J(){H.r||l(H.c),H=H.p}function R(t,e){t&&t.i&&(I.delete(t),t.i(e))}function W(t,e,n,l){if(t&&t.o){if(I.has(t))return;I.add(t),H.c.push((()=>{I.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}}function G(t){t&&t.c()}function K(t,n,o,s){const{fragment:c,on_mount:a,on_destroy:u,after_update:i}=t.$$;c&&c.m(n,o),s||j((()=>{const n=a.map(e).filter(r);u?u.push(...n):l(n),t.$$.on_mount=[]})),i.forEach(j)}function Q(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(e,r,o,s,c,a,u=[-1]){const i=S;C(e);const d=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:r.context||[]),callbacks:n(),dirty:u,skip_bound:!1};let h=!1;if(d.ctx=o?o(e,r.props||{},((t,n,...l)=>{const r=l.length?l[0]:n;return d.ctx&&c(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),h&&function(t,e){-1===t.$$.dirty[0]&&(T.push(t),P(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],d.update(),h=!0,l(d.before_update),d.fragment=!!s&&s(d.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);d.fragment&&d.fragment.l(t),t.forEach(f)}else d.fragment&&d.fragment.c();r.intro&&R(e.$$.fragment),K(e,r.target,r.anchor,r.customElement),F()}C(i)}class X{$destroy(){Q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Z=[];function tt(e,n=t){let l;const r=[];function s(t){if(o(e,t)&&(e=t,l)){const t=!Z.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),Z.push(n,e)}if(t){for(let t=0;t<Z.length;t+=2)Z[t][0](Z[t+1]);Z.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(o,c=t){const a=[o,c];return r.push(a),1===r.length&&(l=n(s)||t),o(e),()=>{const t=r.indexOf(a);-1!==t&&r.splice(t,1),0===r.length&&(l(),l=null)}}}}function et(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(t){alert("Error saving to localStorage: "+t)}}function nt(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(t){alert("Error loading from localStorage: "+t)}}const lt=tt("default"),rt=tt(!1),ot=tt(null),st=tt(null),ct=tt(nt("dateOfBirth")||"1970-01-01"),at=tt(nt("timeSpans")||[]),ut=function(e,n,o){const c=!Array.isArray(e),a=c?[e]:e,u=n.length<2;return{subscribe:tt(o,(e=>{let o=!1;const i=[];let d=0,f=t;const h=()=>{if(d)return;f();const l=n(c?i[0]:i,e);u?e(l):f=r(l)?l:t},g=a.map(((t,e)=>s(t,(t=>{i[e]=t,d&=~(1<<e),o&&h()}),(()=>{d|=1<<e}))));return o=!0,h(),function(){l(g),f()}})).subscribe}}(at,(t=>{const e=[];for(let n of t)e.includes(n.category)||e.push(n.category);return e.length||e.push("Default"),[...new Set(e)]})),it=tt(nt("settings")||{showPast:!0,blinkNow:!0}),dt=tt({startDate:null,endDate:null,name:"",category:"",style:{}});function ft(t){return new Date(t.getTime())}function ht(t){return t.toISOString().substr(0,10)}function gt(t,e,n){let l;switch(n){case"days":l="Date";break;case"years":l="FullYear";break;default:throw new Error("Only days and years supported")}const r=ft(t);return r["setUTC"+l](r["getUTC"+l]()+e),r}function pt(t,e,n){const l=t.slice();return l[9]=e[n],l}function mt(t,e,n){const l=t.slice();return l[12]=e[n],l}function bt(t,e,n){const l=t.slice();return l[15]=e[n],l}function vt(e){let n,l,r=e[15]+"";return{c(){n=g("option"),l=p(r),n.__value=e[15],n.value=n.__value},m(t,e){d(t,n,e),i(n,l)},p:t,d(t){t&&f(n)}}}function yt(e){let n,l,r=e[12]+"";return{c(){n=g("option"),l=p(r),n.__value=e[12],n.value=n.__value},m(t,e){d(t,n,e),i(n,l)},p:t,d(t){t&&f(n)}}}function $t(e){let n,l,r=e[9]+"";return{c(){n=g("option"),l=p(r),n.__value=e[9],n.value=n.__value},m(t,e){d(t,n,e),i(n,l)},p:t,d(t){t&&f(n)}}}function wt(e){let n,r,o,s,c,a,u,m,b,y=[...Array(100).keys()].map(e[5]),$=[];for(let t=0;t<y.length;t+=1)$[t]=vt(bt(e,y,t));let k=[...Array(12).keys()].map(kt),x=[];for(let t=0;t<k.length;t+=1)x[t]=yt(mt(e,k,t));let q=[...Array(31).keys()].map(xt),_=[];for(let t=0;t<q.length;t+=1)_[t]=$t(pt(e,q,t));return{c(){n=g("div"),r=p("Your day of birth:\n  "),o=g("select");for(let t=0;t<$.length;t+=1)$[t].c();s=p("\n  -\n  "),c=g("select");for(let t=0;t<x.length;t+=1)x[t].c();a=p("\n  -\n  "),u=g("select");for(let t=0;t<_.length;t+=1)_[t].c();void 0===e[0]&&j((()=>e[6].call(o))),void 0===e[1]&&j((()=>e[7].call(c))),void 0===e[2]&&j((()=>e[8].call(u))),w(n,"class","dob-picker svelte-c4w602")},m(t,l){d(t,n,l),i(n,r),i(n,o);for(let t=0;t<$.length;t+=1)$[t].m(o,null);D(o,e[0]),i(n,s),i(n,c);for(let t=0;t<x.length;t+=1)x[t].m(c,null);D(c,e[1]),i(n,a),i(n,u);for(let t=0;t<_.length;t+=1)_[t].m(u,null);D(u,e[2]),m||(b=[v(o,"change",e[6]),v(c,"change",e[7]),v(u,"change",e[8])],m=!0)},p(t,[e]){if(8&e){let n;for(y=[...Array(100).keys()].map(t[5]),n=0;n<y.length;n+=1){const l=bt(t,y,n);$[n]?$[n].p(l,e):($[n]=vt(l),$[n].c(),$[n].m(o,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=y.length}if(9&e&&D(o,t[0]),0&e){let n;for(k=[...Array(12).keys()].map(kt),n=0;n<k.length;n+=1){const l=mt(t,k,n);x[n]?x[n].p(l,e):(x[n]=yt(l),x[n].c(),x[n].m(c,null))}for(;n<x.length;n+=1)x[n].d(1);x.length=k.length}if(2&e&&D(c,t[1]),0&e){let n;for(q=[...Array(31).keys()].map(xt),n=0;n<q.length;n+=1){const l=pt(t,q,n);_[n]?_[n].p(l,e):(_[n]=$t(l),_[n].c(),_[n].m(u,null))}for(;n<_.length;n+=1)_[n].d(1);_.length=q.length}4&e&&D(u,t[2])},i:t,o:t,d(t){t&&f(n),h($,t),h(x,t),h(_,t),m=!1,l(b)}}}const kt=t=>(t+1).toString().padStart(2,"0"),xt=t=>(t+1).toString().padStart(2,"0");function Dt(t,e,n){let l;c(t,ct,(t=>n(4,l=t)));let r=gt(new Date,-100,"years").getFullYear(),o=l.substr(0,4),s=l.substr(5,2),a=l.substr(8,2);return t.$$.update=()=>{if(23&t.$$.dirty){u(ct,l=`${o}-${s}-${a}`,l);const t=new Date(l);isNaN(t.getTime())&&(n(2,a="28"),u(ct,l=`${o}-${s}-${a}`,l)),et("dateOfBirth",l)}},[o,s,a,r,l,t=>(r+t+1).toString(),function(){o=q(this),n(0,o),n(3,r)},function(){s=q(this),n(1,s)},function(){a=q(this),n(2,a),n(0,o),n(1,s),n(4,l)}]}class qt extends X{constructor(t){super(),V(this,t,Dt,wt,o,{})}}function _t(t,e,n){const l=t.slice();return l[1]=e[n],l}function St(t){let e,n,l,r,o,s,c,a,u,h,b,v,y=t[0].age+"",$=t[0].weekNumber+"",x=t[0].startDate+"",D=t[0].endDate+"",q=t[0].matchedTimeSpans?.length&&Ct(t);return{c(){e=g("div"),n=g("strong"),l=p("Year "),r=p(y),o=p(", Week "),s=p($),c=g("br"),a=m(),u=p(x),h=p(" - "),b=p(D),v=m(),q&&q.c(),w(e,"class","current-week-details svelte-1hyqagj")},m(t,f){d(t,e,f),i(e,n),i(n,l),i(n,r),i(n,o),i(n,s),i(e,c),i(e,a),i(e,u),i(e,h),i(e,b),i(e,v),q&&q.m(e,null)},p(t,n){1&n&&y!==(y=t[0].age+"")&&k(r,y),1&n&&$!==($=t[0].weekNumber+"")&&k(s,$),1&n&&x!==(x=t[0].startDate+"")&&k(u,x),1&n&&D!==(D=t[0].endDate+"")&&k(b,D),t[0].matchedTimeSpans?.length?q?q.p(t,n):(q=Ct(t),q.c(),q.m(e,null)):q&&(q.d(1),q=null)},d(t){t&&f(e),q&&q.d()}}}function Ct(t){let e,n,l,r=t[0].matchedTimeSpans,o=[];for(let e=0;e<r.length;e+=1)o[e]=Nt(_t(t,r,e));return{c(){e=g("hr"),n=m();for(let t=0;t<o.length;t+=1)o[t].c();l=b(),w(e,"class","spacer svelte-1hyqagj")},m(t,r){d(t,e,r),d(t,n,r);for(let e=0;e<o.length;e+=1)o[e].m(t,r);d(t,l,r)},p(t,e){if(1&e){let n;for(r=t[0].matchedTimeSpans,n=0;n<r.length;n+=1){const s=_t(t,r,n);o[n]?o[n].p(s,e):(o[n]=Nt(s),o[n].c(),o[n].m(l.parentNode,l))}for(;n<o.length;n+=1)o[n].d(1);o.length=r.length}},d(t){t&&f(e),t&&f(n),h(o,t),t&&f(l)}}}function Nt(t){let e,n,l,r,o,s,c,a,u,h,b,v,y=t[1].name+"",$=t[1].category+"",x=t[1].startDate+"",D=t[1].endDate+"";return{c(){e=g("p"),n=g("strong"),l=p(y),r=p(" ("),o=p($),s=p(")"),c=g("br"),a=m(),u=p(x),h=p(" - "),b=p(D),v=m(),w(e,"class","span svelte-1hyqagj")},m(t,f){d(t,e,f),i(e,n),i(n,l),i(n,r),i(n,o),i(n,s),i(e,c),i(e,a),i(e,u),i(e,h),i(e,b),i(e,v)},p(t,e){1&e&&y!==(y=t[1].name+"")&&k(l,y),1&e&&$!==($=t[1].category+"")&&k(o,$),1&e&&x!==(x=t[1].startDate+"")&&k(u,x),1&e&&D!==(D=t[1].endDate+"")&&k(b,D)},d(t){t&&f(e)}}}function Tt(e){let n,l=e[0]&&St(e);return{c(){l&&l.c(),n=b()},m(t,e){l&&l.m(t,e),d(t,n,e)},p(t,[e]){t[0]?l?l.p(t,e):(l=St(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&f(n)}}}function At(t,e,n){let l;return c(t,ot,(t=>n(0,l=t))),[l]}class Et extends X{constructor(t){super(),V(this,t,At,Tt,o,{})}}var Ot='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <g>\n        <path d="M18.717 6.697l-1.414-1.414-5.303 5.303-5.303-5.303-1.414 1.414 5.303 5.303-5.303 5.303 1.414 1.414 5.303-5.303 5.303 5.303 1.414-1.414-5.303-5.303z"/>\n    </g>\n</svg>';function zt(t,e,n){const l=t.slice();return l[29]=e[n],l}function Bt(t){let e,n,l,r=t[5].startDate+"";return{c(){e=g("div"),n=p("Start: "),l=p(r),w(e,"class","substep svelte-1b4beq0")},m(t,r){d(t,e,r),i(e,n),i(e,l)},p(t,e){32&e[0]&&r!==(r=t[5].startDate+"")&&k(l,r)},d(t){t&&f(e)}}}function Pt(e){let n;return{c(){n=g("div"),n.textContent="Pick a start date from the calendar",w(n,"class","substep svelte-1b4beq0")},m(t,e){d(t,n,e)},p:t,d(t){t&&f(n)}}}function jt(t){let e,n,l=t[5].endDate+"";return{c(){e=p("End: "),n=p(l)},m(t,l){d(t,e,l),d(t,n,l)},p(t,e){32&e[0]&&l!==(l=t[5].endDate+"")&&k(n,l)},d(t){t&&f(e),t&&f(n)}}}function Lt(e){let n,l,r,o;return{c(){n=p("Pick an end date or click\n        "),l=g("button"),l.textContent="ongoing"},m(t,s){d(t,n,s),d(t,l,s),r||(o=v(l,"click",e[12]),r=!0)},p:t,d(t){t&&f(n),t&&f(l),r=!1,o()}}}function Yt(t){let e,n,r;return{c(){e=g("input"),w(e,"class","svelte-1b4beq0")},m(l,o){d(l,e,o),x(e,t[5].category),t[16](e),n||(r=[v(e,"input",t[15]),v(e,"blur",t[9])],n=!0)},p(t,n){32&n[0]&&e.value!==t[5].category&&x(e,t[5].category)},d(o){o&&f(e),t[16](null),n=!1,l(r)}}}function Ft(t){let e,n,l,r,o=t[6],s=[];for(let e=0;e<o.length;e+=1)s[e]=Mt(zt(t,o,e));return{c(){e=g("select");for(let t=0;t<s.length;t+=1)s[t].c();n=g("option"),n.textContent="Create new category...",n.__value="$$createNew",n.value=n.__value},m(o,c){d(o,e,c);for(let t=0;t<s.length;t+=1)s[t].m(e,null);i(e,n),l||(r=v(e,"change",t[8]),l=!0)},p(t,l){if(64&l[0]){let r;for(o=t[6],r=0;r<o.length;r+=1){const c=zt(t,o,r);s[r]?s[r].p(c,l):(s[r]=Mt(c),s[r].c(),s[r].m(e,n))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},d(t){t&&f(e),h(s,t),l=!1,r()}}}function Mt(t){let e,n,l,r=t[29]+"";return{c(){e=g("option"),n=p(r),e.__value=l=t[29],e.value=e.__value},m(t,l){d(t,e,l),i(e,n)},p(t,o){64&o[0]&&r!==(r=t[29]+"")&&k(n,r),64&o[0]&&l!==(l=t[29])&&(e.__value=l,e.value=e.__value)},d(t){t&&f(e)}}}function It(e){let n,l,r;return{c(){n=g("a"),n.textContent="Set background color",w(n,"href","#"),w(n,"class","svelte-1b4beq0")},m(t,o){d(t,n,o),l||(r=v(n,"click",y(e[19])),l=!0)},p:t,d(t){t&&f(n),l=!1,r()}}}function Ht(t){let e,n,r,o,s,c,a,u;return{c(){e=g("input"),n=m(),r=g("div"),o=g("label"),o.textContent="Background color",s=m(),c=g("a"),c.textContent="unset",w(e,"type","color"),w(e,"id","bg-color"),w(e,"class","svelte-1b4beq0"),w(o,"for","bg-color"),w(c,"href","#"),w(c,"class","svelte-1b4beq0")},m(l,f){d(l,e,f),x(e,t[5].style["background-color"]),d(l,n,f),d(l,r,f),i(r,o),i(r,s),i(r,c),a||(u=[v(e,"input",t[17]),v(c,"click",y(t[18]))],a=!0)},p(t,n){32&n[0]&&x(e,t[5].style["background-color"])},d(t){t&&f(e),t&&f(n),t&&f(r),a=!1,l(u)}}}function Ut(e){let n,l,r;return{c(){n=g("a"),n.textContent="Set border color",w(n,"href","#"),w(n,"class","svelte-1b4beq0")},m(t,o){d(t,n,o),l||(r=v(n,"click",y(e[22])),l=!0)},p:t,d(t){t&&f(n),l=!1,r()}}}function Jt(t){let e,n,r,o,s,c,a,u;return{c(){e=g("input"),n=m(),r=g("div"),o=g("label"),o.textContent="Border color",s=m(),c=g("a"),c.textContent="unset",w(e,"type","color"),w(e,"id","b-color"),w(e,"class","svelte-1b4beq0"),w(o,"for","b-color"),w(c,"href","#"),w(c,"class","svelte-1b4beq0")},m(l,f){d(l,e,f),x(e,t[5].style["border-color"]),d(l,n,f),d(l,r,f),i(r,o),i(r,s),i(r,c),a||(u=[v(e,"input",t[20]),v(c,"click",y(t[21]))],a=!0)},p(t,n){32&n[0]&&x(e,t[5].style["border-color"])},d(t){t&&f(e),t&&f(n),t&&f(r),a=!1,l(u)}}}function Rt(e){let n,l,r;return{c(){n=g("a"),n.textContent="Set border width",w(n,"href","#"),w(n,"class","svelte-1b4beq0")},m(t,o){d(t,n,o),l||(r=v(n,"click",y(e[25])),l=!0)},p:t,d(t){t&&f(n),l=!1,r()}}}function Wt(t){let e,n,r,o,s,c,a,u;return{c(){e=g("input"),n=m(),r=g("div"),o=g("label"),o.textContent="Border width",s=m(),c=g("a"),c.textContent="unset",w(e,"type","range"),w(e,"min","0"),w(e,"max","9"),w(e,"id","b-width"),w(e,"class","svelte-1b4beq0"),w(o,"for","b-width"),w(c,"href","#"),w(c,"class","svelte-1b4beq0")},m(l,f){d(l,e,f),x(e,t[5].style["border-width"]),d(l,n,f),d(l,r,f),i(r,o),i(r,s),i(r,c),a||(u=[v(e,"change",t[23]),v(e,"input",t[23]),v(c,"click",y(t[24]))],a=!0)},p(t,n){32&n[0]&&x(e,t[5].style["border-width"])},d(t){t&&f(e),t&&f(n),t&&f(r),a=!1,l(u)}}}function Gt(e){let n,r,o,s,c,a,u,h,b,y,$,k,D,q,S,C,N,T,A,E,O,z,B,P,j,L,Y,F,M,I,H,U,J,R;function W(t,e){return t[5].startDate?Bt:Pt}let G=W(e),K=G(e);function Q(t,e){return t[5].endDate?jt:Lt}let V=Q(e),X=V(e);function Z(t,e){return"select"===t[3]?Ft:Yt}let tt=Z(e),et=tt(e);function nt(t,e){return null!==t[5].style["background-color"]?Ht:It}let lt=nt(e),rt=lt(e);function ot(t,e){return null!==t[5].style["border-color"]?Jt:Ut}let st=ot(e),ct=st(e);function at(t,e){return null!==t[5].style["border-width"]?Wt:Rt}let ut=at(e),it=ut(e);return{c(){n=g("div"),r=g("div"),r.textContent="Create time span",o=m(),s=g("a"),c=m(),a=g("div"),K.c(),u=m(),h=g("div"),b=g("div"),X.c(),y=m(),$=g("div"),k=g("div"),D=g("div"),D.textContent="Name",q=m(),S=g("input"),C=m(),N=g("div"),T=g("div"),T.textContent="Category",A=m(),et.c(),E=m(),O=g("div"),z=g("div"),z.textContent="Styling",B=m(),P=g("div"),rt.c(),j=m(),L=g("div"),ct.c(),Y=m(),F=g("div"),it.c(),M=m(),I=g("button"),H=p("Create time span"),w(r,"class","title svelte-1b4beq0"),w(s,"class","close svelte-1b4beq0"),w(a,"class","step svelte-1b4beq0"),_(a,"is-active","start"===e[0]),w(b,"class","substep svelte-1b4beq0"),w(h,"class","step svelte-1b4beq0"),_(h,"is-active","end"===e[0]),w(D,"class","substep-head svelte-1b4beq0"),w(S,"class","svelte-1b4beq0"),w(k,"class","substep svelte-1b4beq0"),w(T,"class","substep-head svelte-1b4beq0"),w(N,"class","substep svelte-1b4beq0"),w(z,"class","substep-head svelte-1b4beq0"),w(P,"class","style-row svelte-1b4beq0"),w(L,"class","style-row svelte-1b4beq0"),w(F,"class","style-row svelte-1b4beq0"),w(O,"class","substep svelte-1b4beq0"),w(I,"class","create-button svelte-1b4beq0"),I.disabled=U=!e[5].name?.trim()||!e[5].category?.trim(),w($,"class","step svelte-1b4beq0"),_($,"is-active","name"===e[0]),w(n,"class","create-time-span svelte-1b4beq0")},m(t,l){d(t,n,l),i(n,r),i(n,o),i(n,s),s.innerHTML=Ot,i(n,c),i(n,a),K.m(a,null),i(n,u),i(n,h),i(h,b),X.m(b,null),i(n,y),i(n,$),i($,k),i(k,D),i(k,q),i(k,S),x(S,e[5].name),e[14](S),i($,C),i($,N),i(N,T),i(N,A),et.m(N,null),i($,E),i($,O),i(O,z),i(O,B),i(O,P),rt.m(P,null),i(O,j),i(O,L),ct.m(L,null),i(O,Y),i(O,F),it.m(F,null),i($,M),i($,I),i(I,H),J||(R=[v(s,"click",e[11]),v(S,"input",e[13]),v(I,"click",e[7])],J=!0)},p(t,e){G===(G=W(t))&&K?K.p(t,e):(K.d(1),K=G(t),K&&(K.c(),K.m(a,null))),1&e[0]&&_(a,"is-active","start"===t[0]),V===(V=Q(t))&&X?X.p(t,e):(X.d(1),X=V(t),X&&(X.c(),X.m(b,null))),1&e[0]&&_(h,"is-active","end"===t[0]),32&e[0]&&S.value!==t[5].name&&x(S,t[5].name),tt===(tt=Z(t))&&et?et.p(t,e):(et.d(1),et=tt(t),et&&(et.c(),et.m(N,null))),lt===(lt=nt(t))&&rt?rt.p(t,e):(rt.d(1),rt=lt(t),rt&&(rt.c(),rt.m(P,null))),st===(st=ot(t))&&ct?ct.p(t,e):(ct.d(1),ct=st(t),ct&&(ct.c(),ct.m(L,null))),ut===(ut=at(t))&&it?it.p(t,e):(it.d(1),it=ut(t),it&&(it.c(),it.m(F,null))),32&e[0]&&U!==(U=!t[5].name?.trim()||!t[5].category?.trim())&&(I.disabled=U),1&e[0]&&_($,"is-active","name"===t[0])},i:t,o:t,d(t){t&&f(n),K.d(),X.d(),e[14](null),et.d(),rt.d(),ct.d(),it.d(),J=!1,l(R)}}}function Kt(t,e,n){let l,r,o,s,a;c(t,st,(t=>n(4,l=t))),c(t,dt,(t=>n(5,r=t))),c(t,ut,(t=>n(6,o=t))),c(t,at,(t=>n(26,s=t))),c(t,lt,(t=>n(27,a=t)));let i,d,f="start",h="select";u(st,l=null,l),u(dt,r={startDate:null,endDate:null,name:"",category:o[0],style:{"background-color":"#00c3ff","border-color":null,"border-width":null}},r);function g(t){u(dt,r.style[t]=null,r)}N(st.subscribe((t=>{if(t)return"start"===f?(u(dt,r.startDate=t.startDate,r),void n(0,f="end")):void("end"===f&&(u(dt,r.endDate=t.endDate,r),n(0,f="name"),i.focus()))})));return[f,i,d,h,l,r,o,function(){u(at,s=[...s,r],s),et("timeSpans",s),u(lt,a="default",a)},async function(t){"$$createNew"===t.target.value?(u(dt,r.category="",r),n(3,h="input"),await(P(),z),d.focus()):u(dt,r.category=t.target.value,r)},function(t){t.target.value.trim()||(u(dt,r.category=o[0],r),n(3,h="select"))},g,function(){u(lt,a="default",a)},()=>u(st,l={endDate:"ongoing"},l),function(){r.name=this.value,dt.set(r)},function(t){A[t?"unshift":"push"]((()=>{i=t,n(1,i)}))},function(){r.category=this.value,dt.set(r)},function(t){A[t?"unshift":"push"]((()=>{d=t,n(2,d)}))},function(){r.style["background-color"]=this.value,dt.set(r)},()=>g("background-color"),()=>u(dt,r.style["background-color"]="#00c3ff",r),function(){r.style["border-color"]=this.value,dt.set(r)},()=>g("border-color"),()=>u(dt,r.style["border-color"]="#333333",r),function(){var t;r.style["border-width"]=""===(t=this.value)?null:+t,dt.set(r)},()=>g("border-width"),()=>u(dt,r.style["border-width"]=1,r)]}class Qt extends X{constructor(t){super(),V(this,t,Kt,Gt,o,{},[-1,-1])}}const Vt=ht(new Date);function Xt(t,e,n,l){if("create-time-span"!==t||!e.startDate)return!1;let r;return r=e.endDate?l.startDate<=("ongoing"===e.endDate?Vt:e.endDate):n&&l.startDate<=n.endDate,r&&l.endDate>=e.startDate}function Zt(t,e,n){return!("create-time-span"!==t||!e.startDate||e.endDate)&&n.endDate<e.startDate}function te(t){let e="";for(let n in t){let l="";["border-width"].includes(n)&&(l="px"),e+=null!==t[n]?`${n}:${t[n]}${l};`:""}return e}function ee(t,e=null){const n={"background-color":null,"border-color":null,"border-width":null};for(let e of t.matchedTimeSpans)for(let t in n)null!==e.style[t]&&(n[t]=e.style[t]);if(e)for(let t in e)null!==e[t]&&(n[t]=e[t]);return n}function ne(e){let n,r,o,s,c;return{c(){n=g("div"),r=g("div"),w(r,"class","week svelte-xcrpqt"),w(r,"style",e[3]),w(n,"class",o=a(e[2])+" svelte-xcrpqt")},m(t,l){d(t,n,l),i(n,r),s||(c=[v(n,"mouseenter",e[8]),v(n,"mouseleave",e[9]),v(n,"click",e[10])],s=!0)},p(t,[e]){8&e&&w(r,"style",t[3]),4&e&&o!==(o=a(t[2])+" svelte-xcrpqt")&&w(n,"class",o)},i:t,o:t,d(t){t&&f(n),s=!1,l(c)}}}function le(t,e,n){let l,r,o,s,a;c(t,it,(t=>n(5,l=t))),c(t,ot,(t=>n(1,r=t))),c(t,lt,(t=>n(6,o=t))),c(t,dt,(t=>n(7,s=t))),c(t,st,(t=>n(4,a=t)));let i,{week:d}=e,f=ht(new Date),h="";return t.$$set=t=>{"week"in t&&n(0,d=t.week)},t.$$.update=()=>{if(227&t.$$.dirty){const t={"is-past":l.showPast&&d.endDate<=f,"is-now":l.blinkNow&&d.startDate<=f&&d.endDate>=f,"is-hovered":r&&d.startDate<=r.endDate&&d.endDate>=r.startDate,"is-disabled":Zt(o,s,d)};let e=["week-wrapper"];for(let n in t)t[n]&&e.push(n);for(let t of d.matchedTimeSpans)e.push(t.id);n(2,i=e.join(" "))}1&t.$$.dirty&&n(3,h=te(ee(d))),195&t.$$.dirty&&(Xt(o,s,r,d)?n(3,h=te(ee(d,s.style))):n(3,h=te(ee(d))))},[d,r,i,h,a,l,o,s,()=>u(ot,r=d,r),()=>u(ot,r=null,r),()=>u(st,a=d,a)]}class re extends X{constructor(t){super(),V(this,t,le,ne,o,{week:0})}}function oe(t,e,n){const l=t.slice();return l[5]=e[n],l}function se(t,e,n){const l=t.slice();return l[8]=e[n],l}function ce(t,e,n){const l=t.slice();return l[8]=e[n],l}function ae(e){let n,l,r=e[8]+1+"";return{c(){n=g("div"),l=p(r),w(n,"class","label week-label svelte-1xzrcqo")},m(t,e){d(t,n,e),i(n,l)},p:t,d(t){t&&f(n)}}}function ue(t){let e,n;return e=new re({props:{week:t[8]}}),{c(){G(e.$$.fragment)},m(t,l){K(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.week=t[8]),e.$set(l)},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function ie(t){let e,n,l,r,o,s,c=t[5].age+"",a=t[5].weeks,u=[];for(let e=0;e<a.length;e+=1)u[e]=ue(se(t,a,e));const b=t=>W(u[t],1,1,(()=>{u[t]=null}));return{c(){e=g("div"),n=g("div"),l=p(c),r=m();for(let t=0;t<u.length;t+=1)u[t].c();o=m(),w(n,"class","label year-label svelte-1xzrcqo"),w(e,"class","year svelte-1xzrcqo")},m(t,c){d(t,e,c),i(e,n),i(n,l),i(e,r);for(let t=0;t<u.length;t+=1)u[t].m(e,null);i(e,o),s=!0},p(t,n){if((!s||1&n)&&c!==(c=t[5].age+"")&&k(l,c),1&n){let l;for(a=t[5].weeks,l=0;l<a.length;l+=1){const r=se(t,a,l);u[l]?(u[l].p(r,n),R(u[l],1)):(u[l]=ue(r),u[l].c(),R(u[l],1),u[l].m(e,o))}for(U(),l=a.length;l<u.length;l+=1)b(l);J()}},i(t){if(!s){for(let t=0;t<a.length;t+=1)R(u[t]);s=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)W(u[t]);s=!1},d(t){t&&f(e),h(u,t)}}}function de(t){let e,n,l,r,o,s,c,a,u=[...Array(52).keys()],p=[];for(let e=0;e<u.length;e+=1)p[e]=ae(ce(t,u,e));let b=t[0],v=[];for(let e=0;e<b.length;e+=1)v[e]=ie(oe(t,b,e));const y=t=>W(v[t],1,1,(()=>{v[t]=null}));return{c(){e=g("div"),n=g("div"),n.innerHTML='<div class="year-label svelte-1xzrcqo"> </div> \n    <div style="flex: 1">weeks</div>',l=m(),r=g("div"),o=g("div"),o.textContent="age ↓",s=m();for(let t=0;t<p.length;t+=1)p[t].c();c=m();for(let t=0;t<v.length;t+=1)v[t].c();w(n,"class","year svelte-1xzrcqo"),w(o,"class","label year-label svelte-1xzrcqo"),w(r,"class","year svelte-1xzrcqo"),w(e,"class","life svelte-1xzrcqo")},m(t,u){d(t,e,u),i(e,n),i(e,l),i(e,r),i(r,o),i(r,s);for(let t=0;t<p.length;t+=1)p[t].m(r,null);i(e,c);for(let t=0;t<v.length;t+=1)v[t].m(e,null);a=!0},p(t,[n]){if(0&n){let e;for(u=[...Array(52).keys()],e=0;e<u.length;e+=1){const l=ce(t,u,e);p[e]?p[e].p(l,n):(p[e]=ae(l),p[e].c(),p[e].m(r,null))}for(;e<p.length;e+=1)p[e].d(1);p.length=u.length}if(1&n){let l;for(b=t[0],l=0;l<b.length;l+=1){const r=oe(t,b,l);v[l]?(v[l].p(r,n),R(v[l],1)):(v[l]=ie(r),v[l].c(),R(v[l],1),v[l].m(e,null))}for(U(),l=b.length;l<v.length;l+=1)y(l);J()}},i(t){if(!a){for(let t=0;t<b.length;t+=1)R(v[t]);a=!0}},o(t){v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)W(v[t]);a=!1},d(t){t&&f(e),h(p,t),h(v,t)}}}function fe(t,e,n){let l,r,o,s;c(t,ct,(t=>n(2,l=t))),c(t,at,(t=>n(3,r=t)));const a=ht(new Date);return t.$$.update=()=>{if(6&t.$$.dirty&&(n(1,o=new Date(l)),n(0,s=function(t){let e=ft(t);const n=[];for(let t=0;t<100;t++){let l=e,r=gt(gt(l,1,"years"),-1,"days"),o=ft(l);const s=[];for(let e=1;e<=52;e++){let n=o;o=gt(o,6,"days");let l=o;for(;52===e&&ht(l)<ht(r);)o=gt(o,1,"days"),l=o;s.push({weekNumber:e,age:t,startDate:ht(n),endDate:ht(l),matchedTimeSpans:[]}),o=gt(o,1,"days")}n.push({year:e.getFullYear(),age:t,startDate:ht(l),endDate:ht(r),weeks:s}),e=gt(e,1,"years")}return n}(o))),9&t.$$.dirty)for(let t of s)for(let e of t.weeks){e.matchedTimeSpans=[];for(let t of r)e.startDate<("ongoing"===t.endDate?a:t.endDate)&&e.endDate>t.startDate&&(e.matchedTimeSpans=[...e.matchedTimeSpans,t])}},[s,o,l,r]}class he extends X{constructor(t){super(),V(this,t,fe,de,o,{})}}function ge(e){let n,r,o,s,c,a,u,h,b,y,$,k,x,D,q;return{c(){n=g("div"),r=g("div"),r.textContent="Settings",o=m(),s=g("a"),c=m(),a=g("div"),u=g("label"),h=g("input"),b=p(" Show past"),y=m(),$=g("label"),k=g("input"),x=p(" Blink current week"),w(r,"class","title svelte-1crn61g"),w(s,"class","close svelte-1crn61g"),w(h,"type","checkbox"),w(u,"class","svelte-1crn61g"),w(k,"type","checkbox"),w($,"class","svelte-1crn61g"),w(a,"class","checkboxes svelte-1crn61g"),w(n,"class","settings svelte-1crn61g")},m(t,l){d(t,n,l),i(n,r),i(n,o),i(n,s),s.innerHTML=Ot,i(n,c),i(n,a),i(a,u),i(u,h),h.checked=e[0].showPast,i(u,b),i(a,y),i(a,$),i($,k),k.checked=e[0].blinkNow,i($,x),e[5](n),D||(q=[v(s,"click",e[2]),v(h,"change",e[3]),v(k,"change",e[4])],D=!0)},p(t,[e]){1&e&&(h.checked=t[0].showPast),1&e&&(k.checked=t[0].blinkNow)},i:t,o:t,d(t){t&&f(n),e[5](null),D=!1,l(q)}}}function pe(t,e,n){let l,r,o;return c(t,rt,(t=>n(6,l=t))),c(t,it,(t=>n(0,r=t))),t.$$.update=()=>{1&t.$$.dirty&&et("settings",r)},[r,o,function(t){u(rt,l=!1,l)},function(){r.showPast=this.checked,it.set(r)},function(){r.blinkNow=this.checked,it.set(r)},function(t){A[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}class me extends X{constructor(t){super(),V(this,t,pe,ge,o,{})}}function be(t){let e,n;return e=new me({}),{c(){G(e.$$.fragment)},m(t,l){K(e,t,l),n=!0},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function ve(t){let e,n;return e=new Qt({}),{c(){G(e.$$.fragment)},m(t,l){K(e,t,l),n=!0},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function ye(t){let e,n,r,o,s,c,a,u,h,p,y,k,x,D,q,_,S,C,N,T;o=new qt({}),k=new he({}),D=new Et({});let A=t[1]&&be(),E="create-time-span"===t[0]&&ve();return{c(){e=g("main"),n=g("h1"),n.textContent="YOUR LIFE",r=m(),G(o.$$.fragment),s=m(),c=g("div"),a=g("button"),a.textContent="Create time span",u=m(),h=g("div"),p=g("button"),p.textContent="Settings",y=m(),G(k.$$.fragment),x=m(),G(D.$$.fragment),q=m(),A&&A.c(),_=m(),E&&E.c(),S=b(),w(n,"class","title svelte-9qswxo"),w(c,"class","create-button-wrapper svelte-9qswxo"),w(h,"class","settings-button-wrapper svelte-9qswxo"),w(e,"class","svelte-9qswxo")},m(l,f){d(l,e,f),i(e,n),i(e,r),K(o,e,null),i(e,s),i(e,c),i(c,a),i(e,u),i(e,h),i(h,p),i(e,y),K(k,e,null),d(l,x,f),K(D,l,f),d(l,q,f),A&&A.m(l,f),d(l,_,f),E&&E.m(l,f),d(l,S,f),C=!0,N||(T=[v(a,"click",$(t[2])),v(p,"click",$(t[3]))],N=!0)},p(t,[e]){t[1]?A?2&e&&R(A,1):(A=be(),A.c(),R(A,1),A.m(_.parentNode,_)):A&&(U(),W(A,1,1,(()=>{A=null})),J()),"create-time-span"===t[0]?E?1&e&&R(E,1):(E=ve(),E.c(),R(E,1),E.m(S.parentNode,S)):E&&(U(),W(E,1,1,(()=>{E=null})),J())},i(t){C||(R(o.$$.fragment,t),R(k.$$.fragment,t),R(D.$$.fragment,t),R(A),R(E),C=!0)},o(t){W(o.$$.fragment,t),W(k.$$.fragment,t),W(D.$$.fragment,t),W(A),W(E),C=!1},d(t){t&&f(e),Q(o),Q(k),t&&f(x),Q(D,t),t&&f(q),A&&A.d(t),t&&f(_),E&&E.d(t),t&&f(S),N=!1,l(T)}}}function $e(t,e,n){let l,r;c(t,lt,(t=>n(0,l=t))),c(t,rt,(t=>n(1,r=t)));return[l,r,()=>u(lt,l="create-time-span",l),()=>u(rt,r=!0,r)]}return new class extends X{constructor(t){super(),V(this,t,$e,ye,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
